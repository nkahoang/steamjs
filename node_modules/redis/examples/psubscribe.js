var redis = require("redis"***REMOVED***,
    client1 = redis.createClient(***REMOVED***,
    client2 = redis.createClient(***REMOVED***,
    client3 = redis.createClient(***REMOVED***,
    client4 = redis.createClient(***REMOVED***,
    msg_count = 0;

redis.debug_mode = false;

client1.on("psubscribe", function (pattern, count***REMOVED*** {
    console.log("client1 psubscribed to " + pattern + ", " + count + " total subscriptions"***REMOVED***;
    client2.publish("channeltwo", "Me!"***REMOVED***;
    client3.publish("channelthree", "Me too!"***REMOVED***;
    client4.publish("channelfour", "And me too!"***REMOVED***;
}***REMOVED***;

client1.on("punsubscribe", function (pattern, count***REMOVED*** {
    console.log("client1 punsubscribed from " + pattern + ", " + count + " total subscriptions"***REMOVED***;
    client4.end(***REMOVED***;
    client3.end(***REMOVED***;
    client2.end(***REMOVED***;
    client1.end(***REMOVED***;
}***REMOVED***;

client1.on("pmessage", function (pattern, channel, message***REMOVED*** {
    console.log("("+  pattern +"***REMOVED***" + " client1 received message on " + channel + ": " + message***REMOVED***;
    msg_count += 1;
    if (msg_count === 3***REMOVED*** {
        client1.punsubscribe(***REMOVED***;
  ***REMOVED***
}***REMOVED***;

client1.psubscribe("channel*"***REMOVED***;
