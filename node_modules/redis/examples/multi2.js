var redis  = require("redis"***REMOVED***,
    client = redis.createClient(***REMOVED***, multi;

// start a separate command queue for multi
multi = client.multi(***REMOVED***;
multi.incr("incr thing", redis.print***REMOVED***;
multi.incr("incr other thing", redis.print***REMOVED***;

// runs immediately
client.mset("incr thing", 100, "incr other thing", 1, redis.print***REMOVED***;

// drains multi queue and runs atomically
multi.exec(function (err, replies***REMOVED*** {
    console.log(replies***REMOVED***; // 101, 2
}***REMOVED***;

// you can re-run the same transaction if you like
multi.exec(function (err, replies***REMOVED*** {
    console.log(replies***REMOVED***; // 102, 3
    client.quit(***REMOVED***;
}***REMOVED***;

client.multi([
    ["mget", "multifoo", "multibar", redis.print],
    ["incr", "multifoo"],
    ["incr", "multibar"]
]***REMOVED***.exec(function (err, replies***REMOVED*** {
    console.log(replies.toString(***REMOVED******REMOVED***;
}***REMOVED***;
