var client = require("redis"***REMOVED***.createClient(***REMOVED***;

function print_results(obj***REMOVED*** {
    console.dir(obj***REMOVED***;
}

// build a map of all keys and their types
client.keys("*", function (err, all_keys***REMOVED*** {
    var key_types = {};
    
    all_keys.forEach(function (key, pos***REMOVED*** { // use second arg of forEach to get pos
        client.type(key, function (err, type***REMOVED*** {
            key_types[key] = type;
            if (pos === all_keys.length - 1***REMOVED*** { // callbacks all run in order
                print_results(key_types***REMOVED***;
          ***REMOVED***
      ***REMOVED******REMOVED***;
  ***REMOVED******REMOVED***;
}***REMOVED***;
