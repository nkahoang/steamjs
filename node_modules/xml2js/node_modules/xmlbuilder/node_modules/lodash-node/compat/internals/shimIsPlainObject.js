/**
 * Lo-Dash 2.4.1 (Custom Build***REMOVED*** <http://lodash.com/>
 * Build: `lodash modularize exports="node" -o ./compat/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var forIn = require('../objects/forIn'***REMOVED***,
    isArguments = require('../objects/isArguments'***REMOVED***,
    isFunction = require('../objects/isFunction'***REMOVED***,
    isNode = require('./isNode'***REMOVED***,
    support = require('../support'***REMOVED***;

/** `Object#toString` result shortcuts */
var objectClass = '[object Object]';

/** Used for native method references */
var objectProto = Object.prototype;

/** Used to resolve the internal [[Class]] of values */
var toString = objectProto.toString;

/** Native method shortcuts */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A fallback implementation of `isPlainObject` which checks if a given value
 * is an object created by the `Object` constructor, assuming objects created
 * by the `Object` constructor have no inherited enumerable properties and that
 * there are no `Object.prototype` extensions.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 */
function shimIsPlainObject(value***REMOVED*** {
  var ctor,
      result;

  // avoid non Object objects, `arguments` objects, and DOM elements
  if (!(value && toString.call(value***REMOVED*** == objectClass***REMOVED*** ||
      (ctor = value.constructor, isFunction(ctor***REMOVED*** && !(ctor instanceof ctor***REMOVED******REMOVED*** ||
      (!support.argsClass && isArguments(value***REMOVED******REMOVED*** ||
      (!support.nodeClass && isNode(value***REMOVED******REMOVED******REMOVED*** {
    return false;
***REMOVED***
  // IE < 9 iterates inherited properties before own properties. If the first
  // iterated property is an object's own property then there are no inherited
  // enumerable properties.
  if (support.ownLast***REMOVED*** {
    forIn(value, function(value, key, object***REMOVED*** {
      result = hasOwnProperty.call(object, key***REMOVED***;
      return false;
  ***REMOVED******REMOVED***;
    return result !== false;
***REMOVED***
  // In most environments an object's own properties are iterated before
  // its inherited properties. If the last iterated property is an object's
  // own property then there are no inherited enumerable properties.
  forIn(value, function(value, key***REMOVED*** {
    result = key;
***REMOVED******REMOVED***;
  return typeof result == 'undefined' || hasOwnProperty.call(value, result***REMOVED***;
}

module.exports = shimIsPlainObject;
