/**
 * Lo-Dash 2.4.1 (Custom Build***REMOVED*** <http://lodash.com/>
 * Build: `lodash modularize exports="node" -o ./compat/`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */
var support = require('../support'***REMOVED***;

/**
 * The template used to create iterator functions.
 *
 * @private
 * @param {Object} data The data object used to populate the text.
 * @returns {string} Returns the interpolated text.
 */
var iteratorTemplate = function(obj***REMOVED*** {

  var __p = 'var index, iterable = ' +
  (obj.firstArg***REMOVED*** +
  ', result = ' +
  (obj.init***REMOVED*** +
  ';\nif (!iterable***REMOVED*** return result;\n' +
  (obj.top***REMOVED*** +
  ';';
   if (obj.array***REMOVED*** {
  __p += '\nvar length = iterable.length; index = -1;\nif (' +
  (obj.array***REMOVED*** +
  '***REMOVED*** {  ';
   if (support.unindexedChars***REMOVED*** {
  __p += '\n  if (isString(iterable***REMOVED******REMOVED*** {\n    iterable = iterable.split(\'\'***REMOVED***\n***REMOVED***  ';
 ***REMOVED***
  __p += '\n  while (++index < length***REMOVED*** {\n    ' +
  (obj.loop***REMOVED*** +
  ';\n***REMOVED***\n}\nelse {  ';
 ***REMOVED*** else if (support.nonEnumArgs***REMOVED*** {
  __p += '\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable***REMOVED******REMOVED*** {\n    while (++index < length***REMOVED*** {\n      index += \'\';\n      ' +
  (obj.loop***REMOVED*** +
  ';\n  ***REMOVED***\n***REMOVED*** else {  ';
 ***REMOVED***

   if (support.enumPrototypes***REMOVED*** {
  __p += '\n  var skipProto = typeof iterable == \'function\';\n  ';
 ***REMOVED***

   if (support.enumErrorProps***REMOVED*** {
  __p += '\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ';
 ***REMOVED***

      var conditions = [];    if (support.enumPrototypes***REMOVED*** { conditions.push('!(skipProto && index == "prototype"***REMOVED***'***REMOVED***; }    if (support.enumErrorProps***REMOVED***  { conditions.push('!(skipErrorProps && (index == "message" || index == "name"***REMOVED******REMOVED***'***REMOVED***; }

   if (obj.useHas && obj.keys***REMOVED*** {
  __p += '\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable***REMOVED***,\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length***REMOVED*** {\n    index = ownProps[ownIndex];\n';
      if (conditions.length***REMOVED*** {
  __p += '    if (' +
  (conditions.join(' && '***REMOVED******REMOVED*** +
  '***REMOVED*** {\n  ';
 ***REMOVED***
  __p +=
  (obj.loop***REMOVED*** +
  ';    ';
   if (conditions.length***REMOVED*** {
  __p += '\n  ***REMOVED***';
 ***REMOVED***
  __p += '\n***REMOVED***  ';
 ***REMOVED*** else {
  __p += '\n  for (index in iterable***REMOVED*** {\n';
      if (obj.useHas***REMOVED*** { conditions.push("hasOwnProperty.call(iterable, index***REMOVED***"***REMOVED***; }    if (conditions.length***REMOVED*** {
  __p += '    if (' +
  (conditions.join(' && '***REMOVED******REMOVED*** +
  '***REMOVED*** {\n  ';
 ***REMOVED***
  __p +=
  (obj.loop***REMOVED*** +
  ';    ';
   if (conditions.length***REMOVED*** {
  __p += '\n  ***REMOVED***';
 ***REMOVED***
  __p += '\n***REMOVED***    ';
   if (support.nonEnumShadows***REMOVED*** {
  __p += '\n\n  if (iterable !== objectProto***REMOVED*** {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype***REMOVED***,\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable***REMOVED***,\n        nonEnum = nonEnumProps[className];\n      ';
   for (k = 0; k < 7; k++***REMOVED*** {
  __p += '\n    index = \'' +
  (obj.shadowedProps[k]***REMOVED*** +
  '\';\n    if ((!(isProto && nonEnum[index]***REMOVED*** && hasOwnProperty.call(iterable, index***REMOVED******REMOVED***';
          if (!obj.useHas***REMOVED*** {
  __p += ' || (!nonEnum[index] && iterable[index] !== objectProto[index]***REMOVED***';
 ***REMOVED***
  __p += '***REMOVED*** {\n      ' +
  (obj.loop***REMOVED*** +
  ';\n  ***REMOVED***      ';
 ***REMOVED***
  __p += '\n***REMOVED***    ';
 ***REMOVED***

 ***REMOVED***

   if (obj.array || support.nonEnumArgs***REMOVED*** {
  __p += '\n}';
 ***REMOVED***
  __p +=
  (obj.bottom***REMOVED*** +
  ';\nreturn result';

  return __p
};

module.exports = iteratorTemplate;
