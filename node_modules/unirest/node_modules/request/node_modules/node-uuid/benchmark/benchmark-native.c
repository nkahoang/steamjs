/*
Test performance of native C UUID generation

To Compile: cc -luuid benchmark-native.c -o benchmark-native
*/

#include <stdio.h>
#include <unistd.h>
#include <sys/time.h>
#include <uuid/uuid.h>

int main(***REMOVED*** {
  uuid_t myid;
  char buf[36+1];
  int i;
  struct timeval t;
  double start, finish;

  gettimeofday(&t, NULL***REMOVED***;
  start = t.tv_sec + t.tv_usec/1e6;

  int n = 2e5;
  for (i = 0; i < n; i++***REMOVED*** {
    uuid_generate(myid***REMOVED***;
    uuid_unparse(myid, buf***REMOVED***;
***REMOVED***

  gettimeofday(&t, NULL***REMOVED***;
  finish = t.tv_sec + t.tv_usec/1e6;
  double dur = finish - start;

  printf("%d uuids/sec", (int***REMOVED***(n/dur***REMOVED******REMOVED***;
  return 0;
}
