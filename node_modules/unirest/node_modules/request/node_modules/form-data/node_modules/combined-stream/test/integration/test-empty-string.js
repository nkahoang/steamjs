var common = require('../common'***REMOVED***;
var assert = common.assert;
var CombinedStream = common.CombinedStream;
var util = require('util'***REMOVED***;
var Stream = require('stream'***REMOVED***.Stream;

var s = CombinedStream.create(***REMOVED***;


function StringStream(***REMOVED***{
  this.writable=true;
  this.str=""
}
util.inherits(StringStream,Stream***REMOVED***;

StringStream.prototype.write=function(chunk,encoding***REMOVED***{
  this.str+=chunk.toString(***REMOVED***;
  this.emit('data',chunk***REMOVED***;
}

StringStream.prototype.end=function(chunk,encoding***REMOVED***{
  this.emit('end'***REMOVED***;
}

StringStream.prototype.toString=function(***REMOVED***{
  return this.str;
}


s.append("foo."***REMOVED***;
s.append(""***REMOVED***;
s.append("bar"***REMOVED***;

var ss = new StringStream(***REMOVED***;

s.pipe(ss***REMOVED***;
s.resume(***REMOVED***;

assert.equal(ss.toString(***REMOVED***,"foo.bar"***REMOVED***;
