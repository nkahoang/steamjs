var common = require('../common'***REMOVED***;
var assert = common.assert;
var fake = common.fake.create(***REMOVED***;
var DelayedStream = common.DelayedStream;
var Stream = require('stream'***REMOVED***.Stream;

(function testMaxDataSize(***REMOVED*** {
  var source = new Stream(***REMOVED***;
  var delayedStream = DelayedStream.create(source, {maxDataSize: 1024, pauseStream: false}***REMOVED***;

  source.emit('data', new Buffer(1024***REMOVED******REMOVED***;

  fake
    .expect(delayedStream, 'emit'***REMOVED***
    .withArg(1, 'error'***REMOVED***;
  source.emit('data', new Buffer(1***REMOVED******REMOVED***;
  fake.verify(***REMOVED***;
}***REMOVED***(***REMOVED***;
