# node-http-signature

node-http-signature is a node.js library that has client and server components
for Joyent's [HTTP Signature Scheme](http_signing.md***REMOVED***.

## Usage

Note the example below signs a request with the same key/cert used to start an
HTTP server. This is almost certainly not what you actaully want, but is just
used to illustrate the API calls; you will need to provide your own key
management in addition to this library.

### Client

    var fs = require('fs'***REMOVED***;
    var https = require('https'***REMOVED***;
    var httpSignature = require('http-signature'***REMOVED***;

    var key = fs.readFileSync('./key.pem', 'ascii'***REMOVED***;

    var options = {
      host: 'localhost',
      port: 8443,
      path: '/',
      method: 'GET',
      headers: {}
  ***REMOVED***;

    // Adds a 'Date' header in, signs it, and adds the
    // 'Authorization' header in.
    var req = https.request(options, function(res***REMOVED*** {
      console.log(res.statusCode***REMOVED***;
  ***REMOVED******REMOVED***;


    httpSignature.sign(req, {
      key: key,
      keyId: './cert.pem'
  ***REMOVED******REMOVED***;

    req.end(***REMOVED***;

### Server

    var fs = require('fs'***REMOVED***;
    var https = require('https'***REMOVED***;
    var httpSignature = require('http-signature'***REMOVED***;

    var options = {
      key: fs.readFileSync('./key.pem'***REMOVED***,
      cert: fs.readFileSync('./cert.pem'***REMOVED***
  ***REMOVED***;

    https.createServer(options, function (req, res***REMOVED*** {
      var rc = 200;
      var parsed = httpSignature.parseRequest(req***REMOVED***;
      var pub = fs.readFileSync(parsed.keyId, 'ascii'***REMOVED***;
      if (!httpSignature.verifySignature(parsed, pub***REMOVED******REMOVED***
        rc = 401;

      res.writeHead(rc***REMOVED***;
      res.end(***REMOVED***;
  ***REMOVED******REMOVED***.listen(8443***REMOVED***;

## Installation

    npm install http-signature

## License

MIT.

## Bugs

See <https://github.com/joyent/node-http-signature/issues>.
