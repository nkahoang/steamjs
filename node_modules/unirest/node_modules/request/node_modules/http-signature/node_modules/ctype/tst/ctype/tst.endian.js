/*
 * Simple test to make sure that the endian setting works.
 */

var mod_ctype = require('../../ctype.js'***REMOVED***;
var mod_assert = require('assert'***REMOVED***;

function test(***REMOVED***
{
	var parser, buf;

	parser = new mod_ctype.Parser({
	    endian: 'little'
	}***REMOVED***;

	buf = new Buffer(2***REMOVED***;
	parser.writeData([ { key: { type: 'uint16_t' } } ], buf, 0, [ 0x1234 ]***REMOVED***;
	mod_assert.equal(buf[0], 0x34***REMOVED***;
	mod_assert.equal(buf[1], 0x12***REMOVED***;
	parser.setEndian('big'***REMOVED***;

	parser.writeData([ { key: { type: 'uint16_t' } } ], buf, 0, [ 0x1234 ]***REMOVED***;
	mod_assert.equal(buf[0], 0x12***REMOVED***;
	mod_assert.equal(buf[1], 0x34***REMOVED***;

	parser.setEndian('little'***REMOVED***;
	parser.writeData([ { key: { type: 'uint16_t' } } ], buf, 0, [ 0x1234 ]***REMOVED***;
	mod_assert.equal(buf[0], 0x34***REMOVED***;
	mod_assert.equal(buf[1], 0x12***REMOVED***;
}

function fail(***REMOVED***
{
	var parser;

	parser = new mod_ctype.Parser({
	    endian: 'little'
	}***REMOVED***;
	mod_assert.throws(function (***REMOVED*** {
		parser.setEndian('littlebigwrong'***REMOVED***;
	}***REMOVED***;
}

test(***REMOVED***;
fail(***REMOVED***;
