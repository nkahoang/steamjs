// Safe toJSON
module.exports =
function getSafe (self, uuid***REMOVED*** {
  if (typeof self === 'object' || typeof self === 'function'***REMOVED*** var safe = {}
  if (Array.isArray(self***REMOVED******REMOVED*** var safe = []

  var recurse = []

  Object.defineProperty(self, uuid, {}***REMOVED***

  var attrs = Object.keys(self***REMOVED***.filter(function (i***REMOVED*** {
    if (i === uuid***REMOVED*** return false
    if ( (typeof self[i] !== 'object' && typeof self[i] !== 'function'***REMOVED*** || self[i] === null***REMOVED*** return true
    return !(Object.getOwnPropertyDescriptor(self[i], uuid***REMOVED******REMOVED***
***REMOVED******REMOVED***


  for (var i=0;i<attrs.length;i++***REMOVED*** {
    if ( (typeof self[attrs[i]] !== 'object' && typeof self[attrs[i]] !== 'function'***REMOVED*** ||
          self[attrs[i]] === null
        ***REMOVED*** {
      safe[attrs[i]] = self[attrs[i]]
  ***REMOVED*** else {
      recurse.push(attrs[i]***REMOVED***
      Object.defineProperty(self[attrs[i]], uuid, {}***REMOVED***
  ***REMOVED***
***REMOVED***

  for (var i=0;i<recurse.length;i++***REMOVED*** {
    safe[recurse[i]] = getSafe(self[recurse[i]], uuid***REMOVED***
***REMOVED***

  return safe
}