
/*!
 * Connect - responseTime
 * Copyright(c***REMOVED*** 2011 TJ Holowaychuk
 * MIT Licensed
 */

/**
 * Reponse time:
 *
 * Adds the `X-Response-Time` header displaying the response
 * duration in milliseconds.
 *
 * @return {Function}
 * @api public
 */

module.exports = function responseTime(***REMOVED***{
  return function(req, res, next***REMOVED***{
    next = next || noop;
    if (res._responseTime***REMOVED*** return next(***REMOVED***;
    var writeHead = res.writeHead;
    var start = Date.now(***REMOVED***;
    res._responseTime = true;
    res.writeHead = function(***REMOVED***{
      var duration = Date.now(***REMOVED*** - start;
      res.setHeader('X-Response-Time', duration + 'ms'***REMOVED***;
      writeHead.apply(res, arguments***REMOVED***;
  ***REMOVED***;
    next(***REMOVED***;
***REMOVED***;
};

function noop(***REMOVED*** {};