(function(***REMOVED*** {
  var Negotiator, availableLanguages, http, key, messages, server, val;

  Negotiator = require('../lib/negotiator'***REMOVED***.Negotiator;

  ***REMOVED***;

  messages = {
    es: "Â¡Hola Mundo!",
    en: "Hello World!"
***REMOVED***;

  availableLanguages = (function(***REMOVED*** {
    var _results;
    _results = [];
    for (key in messages***REMOVED*** {
      val = messages[key];
      _results.push(key***REMOVED***;
  ***REMOVED***
    return _results;
***REMOVED******REMOVED***(***REMOVED***;

  server = http.createServer(function(req, res***REMOVED*** {
    var language, negotiator;
    negotiator = new Negotiator(req***REMOVED***;
    console.log("Accept-Language: " + req.headers['accept-language']***REMOVED***;
    console.log("Preferred: " + (negotiator.preferredLanguages(***REMOVED******REMOVED******REMOVED***;
    console.log("Possible: " + (negotiator.preferredLanguages(availableLanguages***REMOVED******REMOVED******REMOVED***;
    language = negotiator.preferredLanguage(availableLanguages***REMOVED***;
    console.log("Selected: " + language***REMOVED***;
    if (language***REMOVED*** {
      res.writeHead(200, {
        'Content-Language': language
    ***REMOVED******REMOVED***;
      return res.end(messages[language]***REMOVED***;
  ***REMOVED*** else {
      res.writeHead(406***REMOVED***;
      return res.end(***REMOVED***;
  ***REMOVED***
***REMOVED******REMOVED***;

  server.listen(8080***REMOVED***;

}***REMOVED***.call(this***REMOVED***;
