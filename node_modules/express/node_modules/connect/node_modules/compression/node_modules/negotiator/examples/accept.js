(function(***REMOVED*** {
  var Negotiator, availableMediaTypes, http, key, representations, server, val;

  Negotiator = require('../lib/negotiator'***REMOVED***.Negotiator;

  ***REMOVED***;

  representations = {
    'text/html': '<h1>Hello world!</h1>',
    'text/plain': 'Hello World!',
    'application/json': JSON.stringify({
      hello: 'world!'
  ***REMOVED******REMOVED***
***REMOVED***;

  availableMediaTypes = (function(***REMOVED*** {
    var _results;
    _results = [];
    for (key in representations***REMOVED*** {
      val = representations[key];
      _results.push(key***REMOVED***;
  ***REMOVED***
    return _results;
***REMOVED******REMOVED***(***REMOVED***;

  server = http.createServer(function(req, res***REMOVED*** {
    var mediaType, negotiator;
    negotiator = new Negotiator(req***REMOVED***;
    console.log("Accept: " + req.headers['accept']***REMOVED***;
    console.log("Preferred: " + (negotiator.preferredMediaTypes(***REMOVED******REMOVED******REMOVED***;
    console.log("Possible: " + (negotiator.preferredMediaTypes(availableMediaTypes***REMOVED******REMOVED******REMOVED***;
    mediaType = negotiator.preferredMediaType(availableMediaTypes***REMOVED***;
    console.log("Selected: " + mediaType***REMOVED***;
    if (mediaType***REMOVED*** {
      res.writeHead(200, {
        'Content-Type': mediaType
    ***REMOVED******REMOVED***;
      return res.end(representations[mediaType]***REMOVED***;
  ***REMOVED*** else {
      res.writeHead(406***REMOVED***;
      return res.end(***REMOVED***;
  ***REMOVED***
***REMOVED******REMOVED***;

  server.listen(8080***REMOVED***;

}***REMOVED***.call(this***REMOVED***;
