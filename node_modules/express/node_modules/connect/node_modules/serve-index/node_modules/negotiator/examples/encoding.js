(function(***REMOVED*** {
  var Negotiator, gbuf, http, messages;

  Negotiator = require('../lib/negotiator'***REMOVED***.Negotiator;

  ***REMOVED***;

  gbuf = require('gzip-buffer'***REMOVED***;

  messages = {
    identity: 'Hello World'
***REMOVED***;

  gbuf.gzip(messages.identity, function(zipped***REMOVED*** {
    var availableEncodings, key, server, val;
    messages.gzip = zipped;
    availableEncodings = (function(***REMOVED*** {
      var _results;
      _results = [];
      for (key in messages***REMOVED*** {
        val = messages[key];
        _results.push(key***REMOVED***;
    ***REMOVED***
      return _results;
  ***REMOVED******REMOVED***(***REMOVED***;
    console.log(availableEncodings***REMOVED***;
    server = http.createServer(function(req, res***REMOVED*** {
      var encoding, negotiator;
      negotiator = new Negotiator(req***REMOVED***;
      console.log("Accept-Encoding: " + req.headers['accept-encoding']***REMOVED***;
      console.log("Preferred: " + (negotiator.encodings(***REMOVED******REMOVED******REMOVED***;
      console.log("Possible: " + (negotiator.encodings(availableEncodings***REMOVED******REMOVED******REMOVED***;
      encoding = negotiator.encoding(availableEncodings***REMOVED***;
      console.log("Selected: " + encoding***REMOVED***;
      if (encoding***REMOVED*** {
        res.writeHead(200, {
          'Content-Encoding': encoding
      ***REMOVED******REMOVED***;
        return res.end(messages[encoding]***REMOVED***;
    ***REMOVED*** else {
        res.writeHead(406***REMOVED***;
        return res.end(***REMOVED***;
    ***REMOVED***
  ***REMOVED******REMOVED***;
    return server.listen(8080***REMOVED***;
***REMOVED******REMOVED***;

}***REMOVED***.call(this***REMOVED***;
