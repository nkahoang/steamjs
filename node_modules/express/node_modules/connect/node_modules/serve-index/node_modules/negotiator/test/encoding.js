(function(***REMOVED*** {
  var configuration, preferredEncodings, testConfigurations, testCorrectEncoding, _i, _len,
    _this = this;

  preferredEncodings = require('../lib/encoding'***REMOVED***.preferredEncodings;

  this["Should return identity encoding when no encoding is provided"] = function(test***REMOVED*** {
    test.deepEqual(preferredEncodings(null***REMOVED***, ['identity']***REMOVED***;
    return test.done(***REMOVED***;
***REMOVED***;

  this["Should include the identity encoding even if not explicity listed"] = function(test***REMOVED*** {
    test.ok(preferredEncodings('gzip'***REMOVED***.indexOf('identity'***REMOVED*** !== -1***REMOVED***;
    return test.done(***REMOVED***;
***REMOVED***;

  this["Should not return identity encoding if q = 0"] = function(test***REMOVED*** {
    test.ok(preferredEncodings('identity;q=0'***REMOVED***.indexOf('identity'***REMOVED*** === -1***REMOVED***;
    return test.done(***REMOVED***;
***REMOVED***;

  this["Should not return identity encoding if * has q = 0"] = function(test***REMOVED*** {
    test.ok(preferredEncodings('*;q=0'***REMOVED***.indexOf('identity'***REMOVED*** === -1***REMOVED***;
    return test.done(***REMOVED***;
***REMOVED***;

  this["Should not return identity encoding if * has q = 0 but identity explicitly has q > 0"] = function(test***REMOVED*** {
    test.ok(preferredEncodings('*;q=0, identity;q=0.5'***REMOVED***.indexOf('identity'***REMOVED*** !== -1***REMOVED***;
    return test.done(***REMOVED***;
***REMOVED***;

  testCorrectEncoding = function(c***REMOVED*** {
    return _this["Should return " + c.selected + " for accept-encoding header " + c.accept + " with provided encoding " + c.provided] = function(test***REMOVED*** {
      test.deepEqual(preferredEncodings(c.accept, c.provided***REMOVED***, c.selected***REMOVED***;
      return test.done(***REMOVED***;
  ***REMOVED***;
***REMOVED***;

  testConfigurations = [
    {
      accept: 'gzip',
      provided: ['identity', 'gzip'],
      selected: ['gzip', 'identity']
  ***REMOVED***, {
      accept: 'gzip, compress',
      provided: ['compress'],
      selected: ['compress']
  ***REMOVED***, {
      accept: 'deflate',
      provided: ['gzip', 'identity'],
      selected: ['identity']
  ***REMOVED***, {
      accept: '*',
      provided: ['identity', 'gzip'],
      selected: ['identity', 'gzip']
  ***REMOVED***, {
      accept: 'gzip, compress',
      provided: ['compress', 'identity'],
      selected: ['compress', 'identity']
  ***REMOVED***, {
      accept: 'gzip;q=0.8, identity;q=0.5, *;q=0.3',
      provided: ['identity', 'gzip', 'compress'],
      selected: ['gzip', 'identity', 'compress']
  ***REMOVED***, {
      accept: 'gzip;q=0.8, compress',
      provided: ['gzip', 'compress'],
      selected: ['compress', 'gzip']
  ***REMOVED***, {
      accept: '*, compress;q=0',
      provided: ['gzip', 'compress'],
      selected: ['gzip']
  ***REMOVED***, {
      accept: 'gzip;q=0.8, compress',
      provided: null,
      selected: ['compress', 'gzip', 'identity']
  ***REMOVED***
  ];

  for (_i = 0, _len = testConfigurations.length; _i < _len; _i++***REMOVED*** {
    configuration = testConfigurations[_i];
    testCorrectEncoding(configuration***REMOVED***;
***REMOVED***

}***REMOVED***.call(this***REMOVED***;
