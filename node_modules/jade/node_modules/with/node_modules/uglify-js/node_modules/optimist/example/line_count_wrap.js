#!/usr/bin/env node
var argv = require('optimist'***REMOVED***
    .usage('Count the lines in a file.\nUsage: $0'***REMOVED***
    .wrap(80***REMOVED***
    .demand('f'***REMOVED***
    .alias('f', [ 'file', 'filename' ]***REMOVED***
    .describe('f',
        "Load a file. It's pretty important."
        + " Required even. So you'd better specify it."
    ***REMOVED***
    .alias('b', 'base'***REMOVED***
    .describe('b', 'Numeric base to display the number of lines in'***REMOVED***
    .default('b', 10***REMOVED***
    .describe('x', 'Super-secret optional parameter which is secret'***REMOVED***
    .default('x', ''***REMOVED***
    .argv
;

var fs = require('fs'***REMOVED***;
var s = fs.createReadStream(argv.file***REMOVED***;

var lines = 0;
s.on('data', function (buf***REMOVED*** {
    lines += buf.toString(***REMOVED***.match(/\n/g***REMOVED***.length;
}***REMOVED***;

s.on('end', function (***REMOVED*** {
    console.log(lines.toString(argv.base***REMOVED******REMOVED***;
}***REMOVED***;
