# with

Compile time `with` for strict mode JavaScript

[![build status](https://secure.travis-ci.org/ForbesLindesay/with.png***REMOVED***](http://travis-ci.org/ForbesLindesay/with***REMOVED***
[![Dependency Status](https://gemnasium.com/ForbesLindesay/with.png***REMOVED***](https://gemnasium.com/ForbesLindesay/with***REMOVED***
[![NPM version](https://badge.fury.io/js/with.png***REMOVED***](http://badge.fury.io/js/with***REMOVED***

## Installation

    $ npm install with

## Usage

```js
var addWith = require('with'***REMOVED***

addWith('obj', 'console.log(a***REMOVED***'***REMOVED***
// => ';(function (console, a***REMOVED*** {
//       console.log(a***REMOVED***
//   ***REMOVED***("console" in obj ? obj.console :
//                          typeof console!=="undefined" ? console : undefined,
//       "a" in obj ? obj.a :
//                    typeof a !== "undefined" ? a : undefined***REMOVED******REMOVED***;'

addWith('obj', 'console.log(a***REMOVED***', ['console']***REMOVED***
// => ';(function (console, a***REMOVED*** {
//       console.log(a***REMOVED***
//   ***REMOVED***("a" in obj ? obj.a :
//                    typeof a !== "undefined" ? a : undefined***REMOVED******REMOVED***;'
```

## API

### addWith(obj, src[, exclude]***REMOVED***

The idea is that this is roughly equivallent to:

```js
with (obj***REMOVED*** {
  src
}
```

There are a few differences though.  For starters, assignments to variables will always remain contained within the with block.

e.g.

```js
var foo = 'foo'
with ({}***REMOVED*** {
  foo = 'bar'
}
assert(foo === 'bar'***REMOVED***// => This fails for compile time with but passes for native with

var obj = {foo: 'foo'}
with ({}***REMOVED*** {
  foo = 'bar'
}
assert(obj.foo === 'bar'***REMOVED***// => This fails for compile time with but passes for native with
```

It also makes everything be declared, so you can always do:

```js
if (foo === undefined***REMOVED***
```

instead of

```js
if (typeof foo === 'undefined'***REMOVED***
```

This is not the case if foo is in `exclude`.  If a variable is excluded, we ignore it entirely.  This is useful if you know a variable will be global as it can lead to efficiency improvements.

It is also safe to use in strict mode (unlike `with`***REMOVED*** and it minifies properly (`with` disables virtually all minification***REMOVED***.

## License

  MIT