var mkdirp = require('../'***REMOVED***.mkdirp;
var ***REMOVED***;
var fs = require('fs'***REMOVED***;
var test = require('tap'***REMOVED***.test;

var ps = [ '', 'tmp' ];

for (var i = 0; i < 25; i++***REMOVED*** {
    var dir = Math.floor(Math.random(***REMOVED*** * Math.pow(16,4***REMOVED******REMOVED***.toString(16***REMOVED***;
    ps.push(dir***REMOVED***;
}

var file = ps.join('/'***REMOVED***;

test('chmod-pre', function (t***REMOVED*** {
    var mode = 0744
    mkdirp(file, mode, function (er***REMOVED*** {
        t.ifError(er, 'should not error'***REMOVED***;
        fs.stat(file, function (er, stat***REMOVED*** {
            t.ifError(er, 'should exist'***REMOVED***;
            t.ok(stat && stat.isDirectory(***REMOVED***, 'should be directory'***REMOVED***;
            t.equal(stat && stat.mode & 0777, mode, 'should be 0744'***REMOVED***;
            t.end(***REMOVED***;
      ***REMOVED******REMOVED***;
  ***REMOVED******REMOVED***;
}***REMOVED***;

test('chmod', function (t***REMOVED*** {
    var mode = 0755
    mkdirp(file, mode, function (er***REMOVED*** {
        t.ifError(er, 'should not error'***REMOVED***;
        fs.stat(file, function (er, stat***REMOVED*** {
            t.ifError(er, 'should exist'***REMOVED***;
            t.ok(stat && stat.isDirectory(***REMOVED***, 'should be directory'***REMOVED***;
            t.end(***REMOVED***;
      ***REMOVED******REMOVED***;
  ***REMOVED******REMOVED***;
}***REMOVED***;
